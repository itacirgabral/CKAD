Run the following command to change the context: -

kubectl config use-context cluster2



In this task, we will use the kubectl command. Here are the steps: -



Use the kubectl get command to list all the given resources: -

kubectl get po,deploy,sa,ns -n fusion-apd-x1df5



Here -n option stands for namespace, which is used to specify the namespace.

The above command will list all the resources from the fusion-apd-x1df5 namespace.

Inspect the service account is used by the pods/deployment.

kubectl get deploy -n fusion-apd-x1df5 robox-west-apd -oyaml



The deployment is using the default service account.



Now, use the kubectl get command to retrieves the YAML definition of a deployment named robox-west-apd and save it into a file.

kubectl get deploy -n fusion-apd-x1df5 robox-west-apd -o yaml > <FILE-NAME>.yaml



Open a VI editor. Make the necessary changes and save it. It should look like this: -

apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    global-kgh: robox-west-apd
  name: robox-west-apd
  namespace: fusion-apd-x1df5
spec:
  replicas: 3
  selector:
    matchLabels:
      global-kgh: robox-west-apd
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        global-kgh: robox-west-apd
    spec:
      containers:
      - image: nginx
        imagePullPolicy: Always
        name: robox-container
      serviceAccountName: galaxy-apd-xb12



Now, replace the resource with the following command:

kubectl replace -f <FILE-NAME>.yaml --force



The above command will delete the existing deployment and create a new one with changes in the given namespace.